<!doctype html>
<html xmlns:ng="http://angularjs.org" id="ng-app" lang="en" ng-app="fantasyApp">
<head>
  <meta charset="utf-8">
  <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />
  <title>Medicare Reimbursment App</title>
  
  <link rel="stylesheet" href="lib/bootstrap/docs/assets/css/bootstrap.css" />
  <link rel="stylesheet" href="lib/bootstrap/docs/assets/css/bootstrap-responsive.css" />
  <link rel="stylesheet" href="css/app.css"/>
  <link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.css' rel='stylesheet' />
</head>
<body>

  <header data-ng-include="'views/header.html'" class="navbar navbar-fixed-top navbar-inverse ng-scope"></header>

  <section class="content" ng-controller="CMS_controller">

    
    <div class="container">
      <div class="clearfix">
      <form id="search_json" class="margin_0 form-search span3">
        Zip Code:<br>
        <input id="zip_code" type="text" placeholder="Enter zip code" class="search-query span2" ng-model="searchTerm"> 
        <button type="submit" ng-click="search()">Search</button>
      </form>
            <div ng-show="data" class="span4">Doctor's Info:<br> <input ng-model="searchDr" placeholder="Name, address, or Specialty" class="span3 search-query"></div>

      <div ng-show="data" class="span4 ">Procedure: <br><input ng-model="searchProcedure" placeholder="Procedure name" class="search-query span3"></div>
      </div>
      <div class="clearfix margin_t20 margin_b20" ng-show="data"> <strong>Results: {{data.length}} health care providers in {{searchTerm}}</strong></div>


<!-- {{data}}-->  

    <!-- Nav tabs -->
    <ul class="nav nav-tabs" ng-show="data">
      <li class="active"><a href="#table" data-toggle="tab">table</a></li>
      <li><a href="#graph" data-toggle="tab">graph</a></li>
      <li><a href="#map" data-toggle="tab">map</a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content" ng-show="data">
      <div class="tab-pane fade in active" id="table">
        <div class=""  ng-repeat="item in data | filter:searchProcedure | filter:searchDr" >
          <div class="row" ng-repeat = "provider in item.info"  ng-show="$first" class="">
              <!-- <button type="button" class="btn btn-default btn-small" data-toggle="" ><i class="icon-plus icon"></i></button> -->
            <div class="span10">
              <div class="row"><label class="span1 margin_l20px margin_t10 width_auto" ><input name="{{provider[0]}}" ng-model="compare" type="checkbox" class="icon-toggle"></label>
              <h4 class="provider_name span5 margin_t10" if="item.values[1]| filter:searchText">{{provider[1]}} {{provider[2]}} </h4>
              <span class="span4 margin_t10" ng-show="$first">{{provider[8]}}</span></div>
              

              <div class="provider_address margin_b20 span6" >{{provider[3]}} {{provider[4]}}, {{provider[5]}}, {{provider[6]}} {{provider[7]}}
              </div >
            </div>
            <div class="span2"><h5 ng-repeat="total in item.total_cost" ng-show="$first" class="pull-right">
           {{ sum(item.total_cost )| currency}}
            
          </h5></div>
          </div>
          
          <div class="row">
            <table class="table span12">
                <thead>
                  <th>Procedure</th>
                  <th>Patients</th>
                  <th>Times Preformed</th>
                  <th>Avg. Billed</th>
                  <th>Avg. Reimbursed</th>
                </thead>
                <tbody>
                    <tr ng-repeat = "value in item.values | filter:searchProcedure" >
                      <td class="span4">{{value[1]}}<span class="hidden">{{value[0]}}</span></td>
                      <td class="span2">{{value[2]}}</td>
                      <td class="span2">{{value[3]}}</td>
                      <td class="span2">{{value[4]  | currency}}</td>
                      <td class="span2">{{value[5] | currency}}</td>
                    </tr>
                </tbody>
           
            </table>
          </div>
        </div>
      </div>
      <div class="tab-pane  fade" id="graph">
        {{reimburse_graph}}
       
        {{myData}} 
        {{difference_graph()}}
        <div id ="graphContainer" ng-bargraph 
          datajson="myData"
          xaxis-name = "'Year'" 
          xaxis-pos = "905"  
          yaxis-name = "'Frequency'" 
          yaxis-pos = "6"></div>
      </div>
      <div class="tab-pane  fade in " id="map">
        <div id="map_div"></div>
      </div>
    </div>
    <div ng-show="data" class="container clearfix margin_t20 margin_b20"> 
      
           
    </div>
       

        
      
</div>
</section>


<script src="http://static.firebase.com/v0/firebase.js"></script>
<script src="https://cdn.firebase.com/v0/firebase-simple-login.js"></script>
<script src="lib/jquery/jquery.js"></script>
<script src="lib/angular/angular.js"></script>
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="lib/angular-resource/angular-resource.min.js"></script>
<script src="lib/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>
<script src="lib/bootstrap/js/bootstrap-collapse.js"></script>
<script src="lib/bootstrap/js/bootstrap-button.js"></script>
<script src="lib/bootstrap/js/bootstrap-tab.js"></script>
<script src="lib/angular-route/angular-route.min.js"></script>
<script src="lib/angular-resource/angular-resource.min.js"></script>

<script src="js/app.js"></script>
<script src="js/config.js"></script>
<script src="js/controllers/CMS_controller.js"></script>
<script src="js/services/CMS_service.js"></script>
<script src="js/directives/cmsdirective.js"></script>
<script src='https://api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.js'></script>
<script>
var map = L.mapbox.map('map_div', 'leigh765.i72gfcdp');
$('#map').on('ready', function() {

});
    
</script>
</body>
</html>
